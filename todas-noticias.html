<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todas as Notícias - CEEP Lourdes</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <a href="index.html" class="logo">
    <img src="logo.png" alt="CEEP LOURDES">
  </a>
  <nav>
    <a href="index.html">INÍCIO</a>
    <a href="todas-noticias.html" class="ativo">NOTÍCIAS</a>
    <a href="index.html#escola">NOSSA ESCOLA</a>
    <a href="index.html#cursos">CURSOS</a>
    <a href="index.html#horario">HORÁRIO DAS TURMAS</a>
    <a href="index.html#agendamento">AGENDAMENTOS</a>
  </nav>
</header>

<main style="max-width:1000px; margin:auto; padding:20px;">
  <h1 style="text-align:center; margin-bottom:20px;">Todas as Notícias</h1>
  <div id="todas-noticias"></div>
</main>

<footer>
  <div class="footer-content">
    <p>© 2025 CEEP Lourdes Carvalho - Todos os direitos reservados</p>
    <div class="social-icons">
      <a href="https://www.instagram.com/ceeplourdes/" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png"></a>
      <a href="https://api.whatsapp.com/message/GAJNXSJ3HNGLE1" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png"></a>
      <a href="https://www.facebook.com/lourdes.carvalho.1441" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png"></a>
      <a href="https://www.youtube.com/@ceeplourdes" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png"></a>
    </div>
  </div>
</footer>

<script>
const url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT7mLbbDjV9ZP1uKkRarE5L3jbpk9NzARPj8xP7DR8p0KfWynqXoySf475LyApPdsv2VrKuWhGLhl2q/pub?output=csv";

fetch(url)
  .then(response => response.text())
  .then(data => {
    let linhas = data.split("\n").slice(1);
    let noticias = linhas.map(linha => {
      let campos = linha.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
      let [dataPub, titulo, descricao, conteudo, imagem] = campos.map(c => c.replace(/^"|"$/g, ""));
      return { data: dataPub, titulo, descricao, conteudo, imagem };
    });

    noticias.sort((a, b) => new Date(b.data) - new Date(a.data));

    let html = noticias.map(n => `
      <div style="margin:10px; padding:20px; border-bottom:1px solid #ddd;">
        <img src="${n.imagem}" style="width:200px; max-height:500px; object-fit:cover;">
        <h3>${n.titulo}</h3>
        <small>${n.data}</small>
        <p>${n.descricao}</p>
        <p>${n.conteudo}</p>
      </div>
    `).join("");

    document.getElementById("todas-noticias").innerHTML = html;
  });
</script>

</body>
</html>
